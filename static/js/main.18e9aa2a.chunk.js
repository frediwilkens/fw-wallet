(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,a){e.exports=a(49)},45:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),s=a(22),u=a(12),i=a(13),o=a(30),p=a(31),d=a(10),m=a(16),h=a.n(m),b=a(19),E=function(){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(e){return e}))},v=function(e,t){return{type:"NEW_EXPENSE",payload:{expense:Object(d.a)({},e),rates:t}}},f={email:""},y=a(32),j={currencies:[],expenses:[],total:0},g=Object(i.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(d.a)(Object(d.a)({},e),{},{email:t.payload});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case"NEW_EXPENSE":return Object(d.a)(Object(d.a)({},e),{},{expenses:[].concat(Object(y.a)(e.expenses),[Object(d.a)(Object(d.a)({},a.expense),{},{id:e.expenses.length,exchangeRates:a.rates})]),total:e.total+parseFloat(a.expense.value)*parseFloat(a.rates[a.expense.currency].ask)});case"DELETE_EXPENSE":return Object(d.a)(Object(d.a)({},e),{},{expenses:t.payload.neoExpe,total:a.subtracted});default:return e}}}),O=Object(i.createStore)(g,Object(o.composeWithDevTools)(Object(i.applyMiddleware)(p.a))),x=(a(45),a(2)),C=a(15),w=a(3),N=a(4),k=a(6),F=a(5),D=function(e){Object(k.a)(a,e);var t=Object(F.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(C.a)({},n,r))},e.validation=function(){var t=e.state,a=t.email,n=t.password,r=/\S+@\S+\.\S+/.test(a),l=n.length<6;return!r||l},e.dispatchAndPush=function(){var t=e.props,a=t.history;(0,t.userDispatch)(e.state.email),a.push("/wallet")},e.state={email:"",password:""},e}return Object(N.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("form",null,r.a.createElement("fieldset",{className:"login-box"},r.a.createElement("h1",{className:"title"},"LOGIN"),r.a.createElement("input",{"data-testid":"email-input",type:"email",name:"email",placeholder:"email",value:t,onChange:this.handleChange,id:"email-input"}),r.a.createElement("input",{"data-testid":"password-input",type:"password",name:"password",placeholder:"password",value:a,onChange:this.handleChange,id:"password-input"}),r.a.createElement("button",{type:"button",disabled:this.validation(),onClick:this.dispatchAndPush,id:"login-btn"},"Sign in")))}}]),a}(r.a.Component),S=Object(u.b)(null,(function(e){return{userDispatch:function(t){return e({type:"USER_LOGIN",payload:t})}}}))(D),T=function(e){Object(k.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).getTotal=function(){return e.props.expenses.reduce((function(e,t){return e+Number(t.exchangeRates[t.currency].ask)*Number(t.value)}),0).toFixed(2)},e}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showUser,a=e.emailField,n=e.totalField,l=e.headerCurrencyField;return r.a.createElement("header",null,r.a.createElement("h2",{"data-testid":a},t),r.a.createElement("h2",null,"Total:"," ",r.a.createElement("span",{"data-testid":n},this.getTotal())," ",r.a.createElement("span",{"data-testid":l},"BRL")))}}]),a}(r.a.Component),R=Object(u.b)((function(e){return{expenses:e.wallet.expenses}}),null)(T),P=function(e){Object(k.a)(a,e);var t=Object(F.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.labelText,n=e.type,l=e.name,c=e.placeholder,s=e.value,u=e.onChange,i=e.nameClass;return r.a.createElement("label",{htmlFor:t},a," ",r.a.createElement("input",{"data-testid":t,type:n,name:l,placeholder:c,value:s,onChange:u,className:i,id:t}))}}]),a}(r.a.Component);P.defaultProps={placeholder:""};var U=P,L=function(e){Object(k.a)(a,e);var t=Object(F.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.labelName,n=e.onChange,l=e.name,c=e.value,s=e.options,u=e.testid;return r.a.createElement("label",{htmlFor:t},a,r.a.createElement("select",{name:l,id:t,required:!0,onChange:n,value:c,"data-testid":t,className:"wallet-input"},s.map((function(e,t){return r.a.createElement("option",{key:e,value:e,className:"wallet-input","data-testid":u[t]},e)}))))}}]),a}(r.a.Component);L.defaultProps={testid:[]};var _=L,I=function(e){Object(k.a)(a,e);var t=Object(F.a)(a);function a(){return Object(w.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){var e=this.props,t=e.labelName,a=e.onClick;return r.a.createElement("button",{type:"button",onClick:a,className:"btn"},t)}}]),a}(n.Component),A=a(20),M=function(e){Object(k.a)(a,e);var t=Object(F.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).deleteExpense=e.deleteExpense.bind(Object(A.a)(e)),e}return Object(N.a)(a,[{key:"deleteExpense",value:function(e){var t=e.target,a=this.props,n=a.expenses,r=a.deleteDispatch,l=parseInt(t.name,10),c=n.filter((function(e){return e.id!==l})),s=c.reduce((function(e,t){var a=parseFloat(t.exchangeRates[t.currency].ask);return e+parseFloat(t.value)*a}),0);r(c,s)}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"Payment Method"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Currency"),r.a.createElement("th",null,"Exchange Rate"),r.a.createElement("th",null,"Converted Value"),r.a.createElement("th",null,"Conversion Currency"),r.a.createElement("th",null,"Delete"))),r.a.createElement("tbody",null,t.map((function(t){var a=t.description,n=t.tag,l=t.method,c=t.value,s=t.id,u=t.currency,i=t.exchangeRates,o=i[u].name.split("/"),p=Number(i[u].ask),d=(Number(c)*Number(p)).toFixed(2);return r.a.createElement("tr",{key:s},r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,o[0]),r.a.createElement("td",null,p.toFixed(2)),r.a.createElement("td",null,d),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"delete-btn","data-testid":"delete-btn",name:s,onClick:e.deleteExpense},"Excluir")))}))))}}]),a}(r.a.Component),V=Object(u.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteDispatch:function(t,a){return e(function(e,t){return{type:"DELETE_EXPENSE",payload:{neoExpe:e,subtracted:t}}}(t,a))}}}))(M),W={value:"",description:"",currency:"USD",currencies:[],method:"Cash",methods:["Cash","Credit Card","Debit Card"],tag:"Food",tags:["Food","Fun","Work","Transport","Health"]},X=function(e){Object(k.a)(a,e);var t=Object(F.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).getCurrencies=Object(b.a)(h.a.mark((function t(){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="USDT",t.next=3,E();case 3:n=t.sent,r=Object.keys(n).filter((function(e){return e!==a})),e.setState({currencies:r});case 6:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(C.a)({},n,r))},e.addExpense=function(){var t=e.props.expenseDispatch,a=e.state;t({value:a.value,description:a.description,currency:a.currency,method:a.method,tag:a.tag}),e.setState({value:"",description:"",currency:"USD",method:"Cash",tag:"Food"})},e.state=W,e}return Object(N.a)(a,[{key:"componentDidMount",value:function(){this.getCurrencies()}},{key:"render",value:function(){var e=this.props.email,t=this.state,a=t.value,n=t.description,l=t.currency,c=t.currencies,s=t.method,u=t.methods,i=t.tag,o=t.tags;return r.a.createElement("div",null,r.a.createElement(R,{showUser:e,emailField:"email-field",totalField:"total-field",headerCurrencyField:"header-currency-field"}),r.a.createElement("form",{className:"wallet-box"},r.a.createElement(U,{labelText:"Value:",id:"value-input",type:"text",name:"value",placeholder:"Value",value:a,onChange:this.handleChange,nameClass:"wallet-input"}),r.a.createElement(U,{labelText:"Description:",id:"description-input",type:"text",name:"description",placeholder:"Description",value:n,onChange:this.handleChange,nameClass:"wallet-input"}),r.a.createElement(_,{id:"currency-input",labelName:"Currency:",onChange:this.handleChange,value:l,options:c,name:"currency",testid:c}),r.a.createElement(_,{id:"method-input",labelName:"Method:",onChange:this.handleChange,value:s,options:u,name:"method"}),r.a.createElement(_,{id:"tag-input",labelName:"Tag:",onChange:this.handleChange,value:i,options:o,name:"tag"}),r.a.createElement(I,{labelName:"Adicionar despesa",onClick:this.addExpense})),r.a.createElement(V,null))}}]),a}(r.a.Component),G=Object(u.b)((function(e){return{email:e.user.email}}),(function(e){return{expenseDispatch:function(t){return e((a=t,function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return n=e.sent,e.abrupt("return",t(v(a,n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a}}}))(X);var B=function(){return r.a.createElement(x.c,null,r.a.createElement(x.a,{exact:!0,path:"/",component:S}),r.a.createElement(x.a,{exact:!0,path:"/wallet",component:G}))};c.a.render(r.a.createElement(s.a,{basename:"/fw-wallet"},r.a.createElement(u.a,{store:O},r.a.createElement(B,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.18e9aa2a.chunk.js.map